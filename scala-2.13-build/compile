#!/usr/bin/env bash

# Interpreter mode: Validate syntax only (fast check)
# The scala command will do the actual compilation and execution in one step

# Basic syntax validation - just check if the file has valid Scala structure
if [ ! -f "$1" ]; then
    echo "Error: File not found: $1"
    exit 1
fi

# Quick validation: check for basic Scala object structure
if ! grep -qE "(object [A-Za-z]|class [A-Za-z])" "$1" 2>/dev/null; then
    echo "Error: No valid Scala object or class found. Please use either:"
    echo "  - object Foo { def main(args: Array[String]): Unit = ... }"
    echo "  - object Foo extends App { ... }"
    exit 1
fi

# Success - actual compilation happens during run phase
exit 0
